<!DOCTYPE html>
<html>
<head>
  <title>Student Portal</title>
  <script>
    const API_BASE = "https://website-1-vot3.onrender.com";

    // Fetch notes from backend
    async function loadNotes() {
      const response = await fetch(`${API_BASE}/notes`);
      const data = await response.json();
      document.getElementById("notes").innerHTML =
        data.notes.map(n => `<li>${n}</li>`).join("");
    }

    // Mark attendance
    async function markAttendance() {
      const studentId = document.getElementById("studentId").value;
      const response = await fetch(`${API_BASE}/attendance/${studentId}`, {
        method: "POST"
      });
      const data = await response.json();
      alert("Attendance marked for Student " + data.student_id);
    }

    // Fetch attendance list
    async function loadAttendance() {
      const response = await fetch(`${API_BASE}/attendance`);
      const data = await response.json();
      document.getElementById("attendance").innerHTML =
        data.map(r => `<li>${r.student_id} - ${r.timestamp}</li>`).join("");
    }

    window.onload = loadNotes; // auto load notes
  </script>
</head>
<body>
  <h1>ðŸ“˜ Student Portal</h1>

  <h2>Notes</h2>
  <ul id="notes"></ul>

  <h2>Mark Attendance</h2>
  <input type="text" id="studentId" placeholder="Enter Student ID">
  <button onclick="markAttendance()">Mark Attendance</button>

  <h2>Attendance Records</h2>
  <button onclick="loadAttendance()">Load Attendance</button>
  <ul id="attendance"></ul>
</body>
</html>
